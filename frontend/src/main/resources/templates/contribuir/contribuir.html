<html th:replace="~{layout/base :: html}">
<div th:fragment="contenido" class="contribucion-seccion">
    <div class="contribucion-contenedor">
        <div class="contribucion-wrapper">

            <div th:replace="~{fragments/go-back :: go-back}"></div>

            <div class="indicador-progreso">
                <div class="paso-progreso activo" data-paso="1">
                    <div class="numero-paso">1</div>
                    <span>Información Básica</span>
                </div>
                <div class="linea-progreso-1"></div>
                <div class="paso-progreso" data-paso="2">
                    <div class="numero-paso">2</div>
                    <span>Ubicación y Fecha</span>
                </div>
                <div class="linea-progreso-2"></div>
                <div class="paso-progreso" data-paso="3">
                    <div class="numero-paso">3</div>
                    <span>Multimedia y Fuentes</span>
                </div>
            </div>


            <div class="formulario-tarjeta">

                <div class="formulario-encabezado">
                    <h1 class="formulario-titulo">Reportar Información Crítica</h1>
                    <p class="formulario-subtitulo">
                        Contribuye con información que puede ayudar a resolver problemas sociales críticos
                    </p>
                </div>

                <div class="formulario-contenido">
                    <form id="formulario-contribucion" class="formulario-principal">


                        <div class="seccion-paso activa" data-paso="1">
                            <div class="campos-formulario">

                                <div class="grupo-campo">
                                    <label for="titulo" class="etiqueta-campo">Título del Hecho *</label>
                                    <input type="text" id="titulo" name="titulo" class="entrada-campo"
                                           maxlength="100" required placeholder="Ej: Incendio en zona industrial">
                                    <p class="ayuda-campo">Máximo 100 caracteres</p>
                                </div>

                                <div class="grupo-campo">
                                    <label for="descripcion" class="etiqueta-campo">Descripción Detallada *</label>
                                    <textarea id="descripcion" name="descripcion" class="entrada-campo area-texto"
                                              minlength="100" maxlength="2000" required
                                              placeholder="Describe detalladamente lo que ocurrió..."></textarea>
                                    <p class="ayuda-campo">Mínimo 100 caracteres, máximo 2000</p>
                                </div>

                                <div class="grupo-campo">
                                    <label for="categoria" class="etiqueta-campo">Categoría *</label>
                                    <select id="categoria" name="categoria" class="entrada-campo" required>
                                        <option value="">Selecciona la categoría</option>
                                        <option value="incendio">Incendio</option>
                                        <option value="inundacion">Inundación</option>
                                        <option value="accidente">Accidente</option>
                                        <option value="otro">Otro</option>
                                    </select>
                                </div>
                            </div>

                            <div class="navegacion-pasos">
                                <button type="button" class="btn btn-primary siguiente-paso">Continuar</button>
                            </div>
                        </div>

                        <div class="seccion-paso" data-paso="2">
                            <div class="paso2-contenedor">

                                <!-- Columna izquierda: Inputs -->
                                <div class="campos-izquierda">
                                    <div class="grupo-campo">
                                        <label for="fecha">Fecha del Hecho *</label>
                                        <input type="date" id="fecha" name="fecha" class="entrada-campo" required>
                                    </div>

                                    <div class="grupo-campo">
                                        <label for="latitud">Latitud *</label>
                                        <input type="text" id="latitud" name="latitud" class="entrada-campo" required
                                               readonly
                                               placeholder="Haz clic en el mapa">
                                    </div>

                                    <div class="grupo-campo">
                                        <label for="longitud">Longitud *</label>
                                        <input type="text" id="longitud" name="longitud" class="entrada-campo" required
                                               readonly
                                               placeholder="Haz clic en el mapa">
                                    </div>

                                </div>

                                <!-- Columna derecha: Mapa -->
                                <div class="mapa-derecha">
                                    <label>Ubicación en el Mapa *</label>
                                    <div id="mapa"></div>
                                    <p class="ayuda-campo">Haz clic en el mapa para marcar la ubicación exacta.</p>
                                </div>
                            </div>

                            <div class="navegacion-pasos">
                                <button type="button" class="btn btn-tertiary paso-anterior">Atrás</button>
                                <button type="button" class="btn btn-primary siguiente-paso">Continuar</button>
                            </div>
                        </div>


                        <div class="seccion-paso" data-paso="3">
                            <div class="campos-formulario">

                                <div class="grupo-campo">
                                    <label for="multimedia" class="etiqueta-campo">Multimedia (Opcional)</label>
                                    <input type="file" id="multimedia" name="multimedia" class="entrada-archivo"
                                           multiple>
                                    <p class="ayuda-campo">Puedes subir imágenes, videos o documentos</p>
                                </div>

                                <div class="grupo-campo">
                                    <label for="fuentes" class="etiqueta-campo">Fuentes y Referencias *</label>
                                    <textarea id="fuentes" name="fuentes" class="entrada-campo area-texto"
                                              required
                                              placeholder="Enlaces a noticias, documentos oficiales, testimonios, etc."></textarea>
                                    <p class="ayuda-campo">Proporciona las fuentes que respalden tu información</p>
                                </div>

                                <div class="grupo-campo">
                                    <label for="notas" class="etiqueta-campo">Notas Adicionales</label>
                                    <textarea id="notas" name="notas" class="entrada-campo area-texto"
                                              placeholder="Cualquier información adicional relevante..."></textarea>
                                </div>
                            </div>

                            <div class="navegacion-pasos">
                                <button type="button" class="btn btn-tertiary paso-anterior">Atrás</button>
                                <button type="submit" class="btn btn-primary enviar-contribucion">Enviar Contribución
                                </button>
                            </div>
                        </div>

                    </form>
                </div>
            </div>

            <div sec:authorize="!isAuthenticated()">
                <div class="seccion-ayuda">
                    <h3 class="titulo-ayuda">¿Tienes más para contribuir?</h3>
                    <p class="descripcion-ayuda">Registrate para poder ver y editar tus contribuciones.</p>
                    <div class="botones-ayuda">
                        <a th:href="@{/registro}" class="btn btn-tertiary">Registrarse</a>
                        <a th:href="@{/login}" class="btn btn-quaternary">Iniciar Sesión</a>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script th:src="@{/js/mapa2.js}"></script>
    <script th:src="@{/js/mostrarPaso.js}"></script>
</div>


</html>
